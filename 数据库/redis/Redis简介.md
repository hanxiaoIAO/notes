## Redis 简介

Redis 是开源的，遵守 BSD 协议，是一个高性能的 key-value 数据库。

### Redis 特点

- Redis 支持数据的持久化，可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。
- Redis 不仅仅支持简单的key-value类型的数据，同时还提供list，set，zset，hash等数据结构的存储。
- Redis 支持数据的备份，即master-slave模式的数据备份。

### Redis 优势

- 性能高
- 数据类型丰富
- 单操作原子性，多操作支持事务
- 其他丰富的特性

## Redis 过期策略

### 定期删除

redis 会将每个设置了过期时间的 key 放入到一个独立的字典中，以后会定期遍历这个字典来删除到期的 key。

Redis 默认会每秒进行十次过期扫描（100ms一次），过期扫描不会遍历过期字典中所有的 key，而是采用了一种简单的贪心策略。

1.从过期字典中随机 20 个 key；

2.删除这 20 个 key 中已经过期的 key；

3.如果过期的 key 比率超过 1/4，那就重复步骤 1；

### 惰性删除

惰性策略就是在客户端访问这个key的时候，redis对key的过期时间进行检查，如果过期了就立即删除，不会给你返回任何东西。

## Redis 内存淘汰策略

- no-enviction（驱逐）：禁止驱逐数据，**默认策略**。当内存不足以容纳新入数据时，新写入操作就会报错，可以保证数据不被丢失。
- allKeys-lru：加入键时，如果过限，首先通过 LRU 算法驱逐最久没有使用的键
- volatile-lru：加入键时，如果过限，首先从设置了过期时间的键的集合中驱逐最久没有使用的键
- allKeys-random：加入键的时候，如果过限，从所有 key 中随机删除
- volatile-random：加入键的时候，如果过限，从设置了过期时间的键的集合中随机删除
- volatile-ttl：从配置了过期时间的键中驱逐马上就要过期的键
- volatile-lfu：从所有配置了过期时间的键中驱逐使用评率做少的键
- allKeys-lfu：从所有键中驱逐使用评率最少的键

